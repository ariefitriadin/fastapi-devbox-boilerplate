{
"packages": [
    "python@3.13",
    "poetry@latest",
    "gcc@latest",
    "postgresql@17",
    "stdenv.cc.cc.lib",
    "zlib"
  ],
  "env": {
    "PYTHONPATH": ".:$PYTHONPATH",
    "POWERLEVEL9K_INSTANT_PROMPT": "quiet",
    "LD_LIBRARY_PATH": "$DEVBOX_PACKAGES_DIR/lib:$LD_LIBRARY_PATH",
    "PGPORT": "5433",
    "PGHOST": "/home/ari3/petprojects/python/apiboilerplate/.devbox/virtenv/postgresql",
    "PGDATABASE": "postgres"
  },
  "shell": {
    "init_hook": [
      "echo 'Welcome to your Python/FastAPI environment!'",
      "poetry config virtualenvs.in-project true",
      "poetry install --no-root"
    ],
    "scripts": {
      "run_dev":    "poetry run uvicorn app.main:app --reload",
      "alembic":    "poetry run alembic",
      "test":       "poetry run pytest tests/",
      "gen_docker": "devbox generate dockerfile",
      "db_start": "pg_ctl -D $PGDATA -o \"-k $PGHOST -p $PGPORT\" start",
      "db_stop":  "pg_ctl -D $PGDATA stop",
      "db_status": "pg_ctl -D $PGDATA status"
    }
  }
}